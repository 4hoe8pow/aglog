---
import BaseLayout from '@layouts/BaseLayout.astro'
import { newtClient, type NewtArticle } from '../../lib/newt'

export const getStaticPaths = async () => {
	const { items: articles } = await newtClient.getContents<NewtArticle>({
		appUid: 'aglog',
		modelUid: 'article',
		query: {
			select: ['title', 'slug', 'body', 'coverImage']
		}
	})
	return articles.map((article) => ({
		params: { slug: article.slug },
		props: { article }
	}))
}

const { article } = Astro.props
---

<BaseLayout>
	<main>
		<h2>{article.title}</h2>
		<article set:html={article.body} />
	</main>
</BaseLayout>
